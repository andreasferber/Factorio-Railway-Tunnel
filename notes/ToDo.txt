TODO:

FUTURE:
    - Lock tunnel when its in use by closing both entry signals.
    - Handle players being in a train going through the tunnel.
    - Handle freely driven trains approaching the tunnel (will go on auto through the tunnel).
    - Handle 2 trains both entering the tunnel at once.
    - When trains are leaveing they need to path when the first wagon is out. At present they are shoved out entirely and then path. Maybe use of hidden loco or miroring signals on to underground would help.
    - Handle long trains:
        - Place rails under the underground train carraiges if its a very long train.
        - Confirm that if a train leaving is slowed and it is still entering that the entering train keeps in sync correctly. Should just work.
    - Make recipes, techs and item & entities localisations.
    - Minimap colored lines for tunnels.
    - Handle trains running out of fuel. Give them enough to get out of the tunnel entirely so the player can deal with.
	- Handle trains being destroyed as they go in/come out of the tunnel. The forceing in and out process should prevent players from controlling them as every tick we reapply our control.
    - Set entity resistences, health, destroyable.

NICE TO HAVE:
    - When you misplace a tunnel part use a render to show the valid spots to the player. As can be annoying to work out which axis is wrong.
    - When a tunnel part is placed invalidly and it is mined by the player/robot it shows the item being picked up. Need to return the item and remove the entity in a silent way. We show red warning text to the player already.
    - Graphics: icons, ingame entities, placement entities.
    - Review what to allow to be built on top of the tunnel segments, either just belts or anything non trains. At present is nothing.
    - Have a 4x4 tunnel segment that is for 2 tunnels crossing each other. Will need changes to tunnel complete checking logic.
    - We assume all train carriages are 7 tiles apart, check thier prototypes.
	- When a tunnel is destroyed (by force) there will be a mod setting to drop the train and its contents on the ground at the portal ends. Carraiges, fuel, cargo items, equipment grids.
    - When copying above train to underground handle equipments grids. At present they are lost by the process.
    - Look at train speed and how long until the train, carraige will next need to be monitored and then have the ongoing function run scheduled for then. This should reduce the event firings from ever second and lower UPS.
    - Very very fast train mods may cause issues as they can move more than 15 tiles per tick, like: https://mods.factorio.com/mod/fast_trans. Either block or force to slow down for tunnels on approach?
    - Block train wagons being placed on invisible rails.